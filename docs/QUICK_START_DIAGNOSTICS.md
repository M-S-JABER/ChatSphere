# ๐ ุฏููู ุงูุจุฏุก ุงูุณุฑูุน - ุฃุฏุงุฉ ุชุดุฎูุต Webhook

## โ ุชู ุฅุตูุงุญ ุงููุดููุฉ!

ุชู ุญู ูุดููุฉ ุนุฏู ุงุณุชูุงู ุงูุฑุณุงุฆู ูุฅุถุงูุฉ ูุธุงู ุชุดุฎูุต ุดุงูู.

## ๐ฏ ููููุฉ ุงููุตูู ูุฃุฏุงุฉ ุงูุชุดุฎูุต

### 1. **ุชุดุบูู ุงูุชุทุจูู**
```bash
npm run dev
```

### 2. **ูุชุญ ุงูุชุทุจูู**
- ุงุฐูุจ ุฅูู: `http://127.0.0.1:8080`
- ุณุฌู ุฏุฎููู ูู admin

### 3. **ุงููุตูู ูุฃุฏุงุฉ ุงูุชุดุฎูุต**
- ุงุถุบุท ุนูู ุฃููููุฉ ุงููุณุชุฎุฏู ูู ุงูุฃุนูู
- ุงุฎุชุฑ **"Webhook Diagnostics"**

## ๐ ุฎุทูุงุช ุงูุชุดุฎูุต

### **ุงูุฎุทูุฉ 1: ูุญุต ุญุงูุฉ ุงููุธุงู**
1. ุงุฎุชุฑ ุงูู instance ูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ
2. ุชุญูู ูู ุชุจููุจ **"Status"**
3. ุชุฃูุฏ ูู ุฃู ุฌููุน ุงููุคุดุฑุงุช **ุฎุถุฑุงุก**

### **ุงูุฎุทูุฉ 2: ุงุฎุชุจุงุฑ ุงูุฅุฑุณุงู**
1. ุงุฐูุจ ุฅูู ุชุจููุจ **"Test Message"**
2. ุฃุฏุฎู ุฑูู ูุงุชู (ูุซุงู: `+1234567890`)
3. ุฃุฏุฎู ุฑุณุงูุฉ ุชุฌุฑูุจูุฉ
4. ุงุถุบุท **"Send Test Message"**

### **ุงูุฎุทูุฉ 3: ูุญุต ุงูุฃุญุฏุงุซ**
1. ุงุฐูุจ ุฅูู ุชุจููุจ **"Recent Events"**
2. ุชุญูู ูู ุงูุฃุญุฏุงุซ ุงูุฃุฎูุฑุฉ
3. ุงุจุญุซ ุนู ุฃุฎุทุงุก ูู ุงูู response

### **ุงูุฎุทูุฉ 4: ุชุดุฎูุต Webhook**
1. ุงุฐูุจ ุฅูู ุชุจููุจ **"Debug Webhook"**
2. ุฃุฏุฎู payload ุชุฌุฑูุจู:

```json
{
  "entry": [
    {
      "changes": [
        {
          "value": {
            "messages": [
              {
                "from": "1234567890",
                "type": "text",
                "text": {
                  "body": "Hello World"
                }
              }
            ]
          }
        }
      ]
    }
  ]
}
```

3. ุงุถุบุท **"Debug Payload"**

## ๐ ูุง ุชู ุฅุถุงูุชู

### **1. ุชุณุฌูู ููุตู**
- ุฑุณุงุฆู ูุงุถุญุฉ ูู console ุงูุฎุงุฏู
- ุชุชุจุน ูู ุฎุทูุฉ ูู ูุนุงูุฌุฉ ุงูุฑุณุงุฆู
- ููุงุณ ููุช ุงููุนุงูุฌุฉ

### **2. ุฃุฏูุงุช ุงูุชุดุฎูุต**
- ุตูุญุฉ ุชุดุฎูุต ุดุงููุฉ
- ูุญุต ุญุงูุฉ ุงููุธุงู
- ุงุฎุชุจุงุฑ ุฅุฑุณุงู ุงูุฑุณุงุฆู
- ุชุดุฎูุต webhook payloads
- ุนุฑุถ ุงูุฃุญุฏุงุซ ุงูุฃุฎูุฑุฉ

### **3. Endpoints ุฌุฏูุฏุฉ**
- `/api/webhook/status/{instanceId}` - ูุญุต ุญุงูุฉ ุงูู webhook
- `/api/test-message` - ุงุฎุชุจุงุฑ ุฅุฑุณุงู ุฑุณุงูุฉ
- `/webhook/debug/{instanceId}` - ุชุดุฎูุต webhook payload

## ๐ง ุญู ุงููุดุงูู ุงูุดุงุฆุนุฉ

### **ูุดููุฉ: "Instance not found"**
- ุชุญูู ูู ุฃู ุงูู instance ููุฌูุฏ ูู Settings
- ุชุฃูุฏ ูู ุฃู ุงูู instance ูุดุท

### **ูุดููุฉ: "Invalid signature"**
- ุชุญูู ูู ุงูู app secret ูู Settings
- ุฃู ุฃุฒู ุงูู app secret ุฅุฐุง ูู ุชูู ุชุญุชุงุฌู

### **ูุดููุฉ: "No events parsed"**
- ุชุญูู ูู ูููู ุงูู payload
- ุงุณุชุฎุฏู ุฃุฏุงุฉ Debug Webhook

### **ูุดููุฉ: ุงูุฑุณุงุฆู ูุง ุชุธูุฑ**
- ุชุญูู ูู ุงุชุตุงู WebSocket
- ุชุฃูุฏ ูู ุฃู ุงูุฑุณุงุฆู ูุญููุธุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

## ๐ ูุฑุงูุจุฉ ุงููุธุงู

### **ูู Console ุงูุฎุงุฏู ุณุชุฑู:**
```
๐ Webhook POST received for instance: abc123
โ Instance found: My WhatsApp (Active: true)
๐ Verifying webhook signature...
โ Webhook signature verified
๐ Parsing incoming events...
๐จ Parsed 1 events
๐ฌ Processing event from: +1234567890
๐พ Saving message to database...
โ Message saved with ID: msg_456
๐ก Broadcasting message to WebSocket clients...
โ Message broadcasted
๐ Webhook processing completed in 45ms
```

### **ูู ุตูุญุฉ ุงูุชุดุฎูุต ุณุชุฑู:**
- ุญุงูุฉ ุงููุธุงู ูุน ูุคุดุฑุงุช ููููุฉ
- ุฅููุงููุฉ ุงุฎุชุจุงุฑ ุงูุฅุฑุณุงู
- ุชุดุฎูุต webhook payloads
- ุนุฑุถ ุงูุฃุญุฏุงุซ ุงูุฃุฎูุฑุฉ

## ๐ฏ ุงููุชูุฌุฉ

ุงูุขู ููููู:
1. **ุชุดุฎูุต ุงููุดุงูู** ุจุณุฑุนุฉ
2. **ุงุฎุชุจุงุฑ ุงููุธุงู** ุจุณูููุฉ
3. **ูุฑุงูุจุฉ ุงูุฃุฏุงุก** ุจุดูู ูุณุชูุฑ
4. **ุญู ุงููุดุงูู** ุจูุนุงููุฉ

---

## ๐ ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ

1. **ุชุญูู ูู Logs** ูู console ุงูุฎุงุฏู
2. **ุงุณุชุฎุฏู ุฃุฏุงุฉ ุงูุชุดุฎูุต** ูู ุงูุชุทุจูู
3. **ุชุญูู ูู ุฅุนุฏุงุฏุงุช Meta** ูู Settings
4. **ุฑุงุฌุน ุฏููู ุงูุชุดุฎูุต** ูู `WEBHOOK_DEBUGGING_GUIDE.md`

**ุงูุขู ุฌุฑุจ ุฃุฏุงุฉ ุงูุชุดุฎูุต ูุฃุฎุจุฑูู ุจุงููุชุงุฆุฌ!** ๐
